# CLAUDE.md

このファイルは、このリポジトリでコードを扱う際のClaude Code (claude.ai/code) へのガイダンスを提供します。

## ボットの実行

Discordボットを実行するには：
```bash
python main.py
```

ボットは `DISCORD_TOKEN` 環境変数を含む `.env` ファイルが必要です。

## 依存関係

依存関係をインストールするには：
```bash
pip install -r requirements.txt
```

## アーキテクチャ

これは以下の核となる機能を持つDiscordボットです：

### ロール管理システム
- チャンネルID `1381707666249875496` でリアクションベースのインターフェースを使用したロール選択を処理
- ユーザーが絵文字（🎮、🎨）でリアクションすると対応するDiscordロールを取得
- ボットはリアクションに基づいてロールの割り当て/削除を自動管理

### フィードバックシステム
- チャンネルID `1381642719557845063` がフィードバック収集チャンネルとして機能
- 絵文字やキーワードを使用してメッセージ内容からカテゴリを自動検出：
  - 🎮/ゲーム: ゲームプレイ
  - 🐛/バグ: バグ報告  
  - 💡/提案: 新機能提案
  - ❓/質問: 質問
  - 📝/その他: その他
- 各フィードバック項目に対してスレッド化された議論を作成
- ⏳（未解決）と✅（解決済み）のリアクションで解決状況を追跡
- 新しいフィードバックが投稿された際に管理チャンネルに通知を送信

### 設定
すべてのハードコードされたID、メッセージ、マッピングは `main.py` の先頭にある `Config` クラスに集約されています。チャンネルID、ロールID、動作を変更する際は、このクラスの定数を更新してください。

### 主要な関数
- `find_or_create_feedback_message()`: 永続的なフィードバック指示メッセージを管理
- `on_message`、`on_raw_reaction_add/remove` のイベントハンドラ: ボットの核となるインタラクション処理ロジック